# Grafana OnCall image used by engine and celery
image:
  # TODO: use our public repo
  repository: registry.digitalocean.com/ildar-testing/hobby-oncall-2
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: "latest"

# TODO: remove this after we use public image
imagePullSecrets:
  - name: "ildar-testing"

nameOverride: ""
fullnameOverride: ""

engine:
  replicaCount: 1
  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

celery:
  replicaCount: 1
  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

env:
  - name: BASE_URL
    value: "localhost:8000"

service:
  type: LoadBalancer
#  type: ClusterIP
  port: 8080

ingress:
  enabled: false
  className: ""
  annotations: {}
#     kubernetes.io/ingress.class: nginx
#     kubernetes.io/tls-acme: "true"
  hosts: []
#    - host: oncall.example.com
#      paths:
#        - path: /
#          pathType: ImplementationSpecific
  tls:  # []
#    - secretName: oncall-example-com-tls
#      hosts:
#        - oncall.example.com

# Additional services configuration
# We recommend using external services to reduce the overhead of managing statefule services
mariadb:
  enabled: true
  auth:
    database: oncall

externalMysql:
  host:
  port:
  db_name:
  user:
  password:

rabbitmq:
  enabled: true

externalRabbitmq:
  host:
  port:
  user:
  password:

redis:
  enabled: true

external_redis:
  host:
  password:

grafana:
  enabled: true
  persistence:
    enabled: true
  plugins:
    - grafana-oncall-app
